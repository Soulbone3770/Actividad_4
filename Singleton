import sqlite3

class Singleton:
    
    instancias = {}
    
    def __new__(cls, *args, **kwargs):
        if cls not in cls.instancias:
            cls.instancias[cls] = super().__new__(cls)
        
        return cls.instancias[cls]

class coneccionBaseDatos(Singleton):
    coneccion = None
    
    def __init__(self):
        if self.coneccion is None:
            self.coneccion = sqlite3.connect("usuarios.db")
    
    def ejecutar(self, query):
        cursor = self.coneccion.cursor()
        cursor.execute(query)
        self.coneccion.commit()
    
    def cerrar(self):
        self.coneccion.close

baseDatosCrear = coneccionBaseDatos()
baseDatosCrear.ejecutar("CREATE TABLE IF NOT EXISTS usuarios (id INTEGER PRIMARY KEY AUTOINCREMENT, nombre TEXT, edad INTEGER)")

baseDatosAdjuntar = coneccionBaseDatos()
baseDatosAdjuntar.ejecutar("INSERT INTO usuarios (nombre, edad) VALUES ('Juan', 22)")
